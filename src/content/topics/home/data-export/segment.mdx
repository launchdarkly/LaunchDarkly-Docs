---
path: '/home/data-export/segment'
title: 'Segment'
description: 'This topic explains how to create and test a Segment destination for Data Export.'
published: true
---

## Overview

This topic explains how to create and test a Segment destination for Data Export.

<Callout intent="info">
<CalloutTitle>Experimentation integration for Segment</CalloutTitle>
<CalloutDescription>

For information about the Experimentation integration for Segment, read [Sending Segment events to experiments](/home/experimentation/segment).

</CalloutDescription>
</Callout>

## Prerequisites

There are two prerequisites to configure the Segment integration:

- You must add the LaunchDarkly Source in Segment
- You must find the **Write Key** for your Segment account

First, add the LaunchDarkly Source in Segment. To add the source, [read Segment's documentation](https://segment.com/docs/connections/sources/catalog/cloud-apps/launchdarkly/).

Next, configure the Segment integration in LaunchDarkly. To do this, you need the **Write Key** from your Segment account.

To find the write key:

1. Log into Segment and navigate to your project
2. Navigate to **Sources** and select your LaunchDarkly source
3. Select **API Keys** on the Source integration's menu bar
4. Copy the **Write Key** as shown in the text box:

![The API Keys section of Segment's UI.](integrations-segment-write-key.png)


## Creating a Segment destination in LaunchDarkly

To create the Segment destination:

1. Navigate to the **[Integrations page](https://app.launchdarkly.com/default/integrations)** and find the Segment card.
2. Click **+ Integration.** The integration screen appears.
3. (Optional) Give your integration a human-readable Name.
4. Choose an Environment for this integration to apply to.
5. Enter the Segment Write key:

![The "Create a Destination" screen.](integrations-segment-create.png)


6. Click **Save destination**. The new integration appears in the list of integrations.

6. Click **Save destination**. The new integration appears in the list of integrations.

## Testing a Segment destination

After you create a Segment destination for Data Export, you can confirm that it's working correctly in the "Edit destination screen."

To test the Segment destination:

1. Navigate to the **Integrations** screen.
2. Find the Segment destination and click **Edit**. The "Edit destination" screen opens.
3. Click **Send Event** in the "Send a test event" section:

![The Send a test event section of the Edit destination screen.](integrations-segment-test-event.png)


4. Verify the event appears in the Segment **Debugger**.

## Example events

These example events display the structure of the events LaunchDarkly sends to Segment.

LaunchDarkly sends events in the following formats:

<CodeTabs
  defaultValue="feature-event"
  values={[
    { label: 'Feature event', value: 'feature-event', },
  ]
}>

<CodeTabItem value="feature-event">

```json
{
  "event": "feature",
  "integrations": {},
  "messageId": "c2f7a2d1-0a1b-456f-8e9a-16756e7a6db5",
  "originalTimestamp": "2019-09-13T21:20:18.114Z",
  "properties": {
    "project": "5744c12345c9900708000001",
    "environment": "5d4b12345d2a2806bd2cc6eb",
    "eventId": "5d7c12345a51a0006e16ae5",
    "default": "true",
    "flagVersion": 42,
    "key": "EXAMPLE-FLAG-KEY",
    "prereqOf": "EXAMPLE-PARENT-FLAG",
    "reasonKind": "FALLTHROUGH",
    "value": "EXAMPLE-FLAG-VALUE",
    "version": 1
  },
  "receivedAt": "2019-09-13T21:20:19.406Z",
  "sentAt": "2019-09-13T21:20:19.366Z",
  "timestamp": "2019-09-13T21:20:18.153Z",
  "type": "track",
  "userId": "EXAMPLE-USER-ID",
}
```

</CodeTabItem>
</CodeTabs>


<CodeTabs
  defaultValue="click-event"
  values={[
    { label: 'Click event', value: 'click-event', },
  ]
}>

<CodeTabItem value="click-event">

```json
{
  "event": "click",
  "integrations": {},
  "messageId": "18925338-0a1b-4521-a36a-c8e9839e4593",
  "originalTimestamp": "2019-09-13T21:21:43.114Z",
  "properties": {
    "project": "5744c98765c9900708000001",
    "environment": "5d4b12345d2a2806bd2cc6eb",
    "eventId": "5d7c123a86f26000065862da",
    "key": "EXAMPLE-FLAG-KEY",
    "selector": "btn",
    "url": "http://example.com",
    "version": 1
  },
  "receivedAt": "2019-09-13T21:21:46.415Z",
  "sentAt": "2019-09-13T21:21:46.375Z",
  "timestamp": "2019-09-13T21:21:43.154Z",
  "type": "track",
  "userId": "EXAMPLE-USER-ID",
}
```

</CodeTabItem>
</CodeTabs>


<CodeTabs
  defaultValue="custom-event"
  values={[
    { label: 'Custom event', value: 'custom-event', },
  ]
}>
<CodeTabItem value="custom-event">

```json
{
  "event": "custom",
  "integrations": {},
  "messageId": "d747a382-0a1b-41d5-b9a6-7ae9b93925bc",
  "originalTimestamp": "2019-09-13T21:21:58.114Z",
  "properties": {
    "project": "5744c12345c9900708000001",
    "environment": "5d4b12345d2a2806bd2cc6eb",
    "eventId": "5d7c123452db400061b14dd",
    "key": "EXAMPLE-EVENT-KEY",
    "version": 1
  },
  "receivedAt": "2019-09-13T21:22:00.673Z",
  "sentAt": "2019-09-13T21:22:00.393Z",
  "timestamp": "2019-09-13T21:21:58.393Z",
  "type": "track",
  "userId": "EXAMPLE-USER-ID",
}

```

</CodeTabItem>
</CodeTabs>

<CodeTabs
  defaultValue="page-event"
  values={[
    { label: 'Page view event', value: 'page-event', },
  ]
}>
<CodeTabItem value="page-event">

```json
{
  "integrations": {},
  "messageId": "8c235148-0a1b-4428-a4de-00b90adf2833",
  "originalTimestamp": "2019-09-13T21:19:43.114Z",
  "properties": {
    "project": "5744c123459900708000001",
    "environment": "5d123454d2a2806bd2cc6eb",
    "eventId": "5d7c12345db400061b14c1",
    "key": "EXAMPLE-FLAG-KEY",
    "url": "http://example.com",
    "version": 1
  },
  "receivedAt": "2019-09-13T21:19:45.371Z",
  "sentAt": "2019-09-13T21:19:45.331Z",
  "timestamp": "2019-09-13T21:19:43.154Z",
  "type": "page",
  "userId": "EXAMPLE-USER-ID",
}
```

</CodeTabItem>
</CodeTabs>

<CodeTabs
  defaultValue="alias-event"
  values={[
    { label: 'Alias event', value: 'alias-event', },
  ]
}>
<CodeTabItem value="alias-event">

```json
{
  "integrations": {},
  "messageId": "8c235148-0a1b-4428-a4de-00b90adf2833",
  "originalTimestamp": "2019-09-13T21:19:43.114Z",
  "project": "5744c123459900708000001",
  "environment": "5d123454d2a2806bd2cc6eb",
  "previousId": "prev-user-key",
  "userId": "new-user-key",
  "receivedAt": "2019-09-13T21:19:45.371Z",
  "sentAt": "2019-09-13T21:19:45.331Z",
  "timestamp": "2019-09-13T21:19:43.154Z",
  "type": "alias",
}
```

</CodeTabItem>
</CodeTabs>

## Enabling Data Export for flags and environments

After you create a Data Export destination, you must start sending flag or environment event data to it. You can enable Data Export for individual flags, or for all the flags in an environment.

To learn more about exporting event data from flags and environments, read [Exporting event data for flags and environments](/home/data-export#exporting-event-data-for-flags-and-environments).

## Deleting a Segment destination

You can delete a Data Export destination from the **Integrations** screen.

To delete a destination:

1. Navigate to the **Integrations** screen.
2. Find the destination you wish to delete and click **Edit**. The "Create a destination" screen opens.
3. Click **Delete Destination**:

![The Delete destination section.](destination-delete.png)

