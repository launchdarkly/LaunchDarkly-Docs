---
path: /sdk/features/evaluating
title: Evaluating flags
description: This topic explains how to use the flag evaluation feature to serve different feature flag variations to users.
published: true
---

## Overview

This topic explains how to use the flag evaluation feature to serve different feature flag variations to users. This feature is available for all of our SDKs.

## Configuring variations

Feature flag variations determine what a user sees when they encounter a feature flag. Every flag has at least two variations, one for when the flag is off, and one for when it's on. To learn more, read [Creating flag variations](/home/flags/variations).

Flags also have fallback variations. The fallback variation only returns if an error occurs. For example, LaunchDarkly serves the fallback variation if the feature flag key doesn't exist, or the user doesn't have a key specified.

The flag evaluation feature adds a user to the Users dashboard if a user does not already exist. Feature flags evaluate against the user context provided to the SDK, which may be different from the data you see in the dashboard. You do not need to create users manually, but if you want to, you can use the `identify` feature. To learn more, read [Identifying and changing users](/sdk/features/identify).

Details about each SDK's configuration are available in the SDK-specific sections below:

* [Client-side SDKs](#client-side-sdks)
* [Server-side SDKs](#server-side-sdks)

## Client-side SDKs

This feature is available for all of our client-side SDKs:

* [.NET (client-side)](#net-client-side)
* [Android](#android)
* [C/C++ (client-side)](#cc-client-side)
* [Electron](#electron)
* [Flutter](#flutter)
* [iOS](#ios)
* [JavaScript](#javascript)
* [Node.js (client-side)](#nodejs-client-side)
* [React Native](#react-native)
* [Roku](#roku)

### .NET (client-side)

<Details summary="Expand .NET (client-side) code sample">

The `Variation` method determines whether a flag is enabled or not for a specific user. In the client-side .NET SDK, there is  a `variation` method for each type, such as `BoolVariation` or `StringVariation`.

`variation` calls take the feature flag key and a default value. The default value only returns if an error is encountered. For example, the default value returns if the feature flag key doesn't exist or the user doesn't have a key specified.

Here is an example:

<CodeTabs
  defaultValue="csharp"
  values={[
    { label: 'Example', value: 'csharp', },
  ]
}>
<CodeTabItem value="csharp">

```csharp
client.BoolVariation("your.feature.key", false);
```

</CodeTabItem>
</CodeTabs>
</Details>

### Android

<Details summary="Expand Android code sample">

The `variation` method determines whether or not a flag is enabled for a specific user. `variation` calls take the feature flag key and a fallback value. When `LDClient` is initialized for the first time at app launch, users receive the feature flag fallback values until an initial connection to LaunchDarkly completes.

In Android, there is  a `variation` method for each type, such as `boolVariation` or `stringVariation`.

Here is an example:

<CodeTabs
  defaultValue="java"
  values={[
    { label: 'Java', value: 'java', },
    { label: 'Kotlin', value: 'kotlin' }
  ]
}>
<CodeTabItem value="java">

```java
boolean variationResult = client.boolVariation(flagKey, false);
```

</CodeTabItem>
<CodeTabItem value="kotlin">

```kotlin
val variationResult: Boolean = client.boolVariation(flagKey, false)
```

</CodeTabItem>
</CodeTabs>
</Details>

### C/C++ (client-side)

<Details summary="Expand C/C++ (server-side) code sample">

The variation methods determine whether or not a flag is enabled for a specific user. The variation method signatures take the feature flag key and a fallback value. When the client is initialized for the first time, users receive the feature flag fallback values until an initial connection to LaunchDarkly completes.

There are variation methods for each type, such as `LDBoolVariation`/`boolVariation` or `LDStringVariation`/`stringVariation`.

Here is an example:

<CodeTabs
  defaultValue="c"
  values={[
    { label: 'C', value: 'c' },
    { label: 'C++', value: 'cpp' }
  ]
}>
<CodeTabItem value="c">

```c
bool show_feature = LDBoolVariation(client, "YOUR_FLAG_KEY", false);
if (show_feature) {
    // application code to show the feature
} else {
    // the code to run if the feature is off
}
```

</CodeTabItem>

<CodeTabItem value="cpp">

```cpp
bool show_feature = client->boolVariation("YOUR_FLAG_KEY", false);

if (show_feature) {
    // application code to show the feature
} else {
    // the code to run if the feature is off
}
```

</CodeTabItem>
</CodeTabs>
</Details>

### Electron

<Details summary="Expand Electron code sample">

To evaluate any feature flag for the current user, call `variation`:

<CodeTabs
  defaultValue="js"
  values={[
    { label: 'JavaScript', value: 'js', },
    { label: 'TypeScript', value: 'ts', },
  ]
}>
<CodeTabItem value="js">

```js
const flagValue = client.variation("YOUR_FEATURE_KEY", false);

// proceed based on flag value, for example:

if (flagValue)  {
  // feature flag is on
} else {
  // feature flag is off
}
```

</CodeTabItem>
<CodeTabItem value="ts">

```ts
const boolFlagValue = client.variation('YOUR_FEATURE_KEY', false) as boolean;
const numberFlagValue = client.variation('YOUR_FEATURE_KEY', 2) as number;
const stringFlagValue = client.variation('YOUR_FEATURE_KEY', 'default') as string;

// proceed based on flag value...

```

</CodeTabItem>
</CodeTabs>

The return value of `variation` is always either one of the variations you defined for your flag in the flag dashboard, or the default value. The default value is the second parameter to `variation`. It is what the client uses if it's not possible to evaluate the flag. For example, the default value returns if the flag key does not exist, or if something about the definition of the flag is invalid.

You can also fetch all flags for the current user.

Here is an example:

<CodeTabs
  defaultValue="js"
  values={[
    { label: 'JavaScript', value: 'js', },
    { label: 'TypeScript', value: 'ts', },
  ]
}>
<CodeTabItem value="js">

```js
const flags = client.allFlags();
const flagValue = flags['YOUR_FEATURE_KEY'];
```

</CodeTabItem>
<CodeTabItem value="ts">

```ts
const flags = client.allFlags();
const flagValue = flags['YOUR_FEATURE_KEY'];
```

</CodeTabItem>
</CodeTabs>

This returns a key-value map of all your feature flags. It contains `null` values for any flags that could not be evaluated.

Both of these methods are synchronous. The client always has the last known flag values in memory, so retrieving them does not involve any input/output (I/O).
</Details>

### Flutter

<Details summary="Expand Flutter code sample">

The `variation` methods determine the flag value for the current user. `variation` calls take the feature flag key and a fallback value. When `LDClient` is initialized for the first time at app launch, users receive the feature flag fallback values until an initial connection to LaunchDarkly completes.

In Flutter, there is  a `variation` method for each type, such as `boolVariation` or `stringVariation`.

Here is an example:

<CodeTabs
  defaultValue="dart"
  values={[
    { label: 'Dart', value: 'dart', },
  ]
}>
<CodeTabItem value="dart">

```dart
bool variationResult = await LDClient.boolVariation(flagKey, false);
```

</CodeTabItem>
</CodeTabs>
</Details>

### iOS

<Details summary="Expand iOS code sample">

The `variation` method returns the variation for the given feature flag. If the flag does not exist, cannot be cast to the correct return type, or the LDClient is not started, the method returns the default value. Use this method when the default value is a non-`Optional` type. `LDFlagValue` shows you all available types.

The LDClient must be started in order to return feature flag values. If the LDClient is not started, it always returns the default value. The LDClient must be online to keep the feature flag values up-to-date. When online, the LDClient has two modes for maintaining feature flag values: *streaming* and *polling*. The client app requests the mode by setting the `config.streamingMode`. Read `LDConfig` for details.

In streaming mode, the LDClient opens a long-running connection to LaunchDarkly's streaming server (called _clientstream_). When a flag value changes on the server, the clientstream notifies the SDK to update the value. Streaming mode is not available on watchOS. On iOS and tvOS, the client app must be running in the foreground to connect to clientstream. On macOS the client app may run in either foreground or background to connect to clientstream. If streaming mode is not available, the SDK reverts to polling mode.

In polling mode, the LDClient requests feature flags from LaunchDarkly's app server at regular intervals defined in the LDConfig. When a flag value changes on the server, the LDClient learns of the change the next time the SDK requests feature flags.

When offline, LDClient closes the clientstream connection and no longer requests feature flags. The LDClient returns feature flag values, assuming the LDClient was started, which may not match the values set on the LaunchDarkly server.

A call to `variation` records events reported later. Recorded events allow clients to analyze usage and assist in debugging issues. There is a single variation method for all types using Swift, but Objective-C requires type specific methods.

Here is an example:

<CodeTabs
  defaultValue="swift"
  values={[
    { label: 'Swift', value: 'swift', },
    { label: 'Objective-C', value: 'objc', },
  ]
}>
<CodeTabItem value="swift">

```swift
let boolFlagValue = LDClient.get()!.variation(forKey: "bool-flag-key", defaultValue: false)
let dictionaryFlagValue = LDClient.get()!.variation(forKey: "dictionary-flag-key", defaultValue: ["a": 1, "b": 2] as [String: Any])
```

</CodeTabItem>
<CodeTabItem value="objc">

```objectivec
BOOL boolFlagValue = [[LDClient get] boolVariationForKey:@"bool-flag-key" defaultValue:NO];
NSDictionary* dictionaryFlagValue = [[LDClient get] dictionaryVariationForKey:@"dictionary-flag-key" defaultValue:@{@"a": @1, @"b": @2}];
```

</CodeTabItem>
</CodeTabs>
</Details>

### JavaScript

<Details summary="Expand JavaScript code sample">

The `variation` method determines which variation of a feature flag a user receives. `variation` calls take the feature flag key and a default value.

The method returns the default value only if it encounters an error, such as when the feature flag key doesn't exist or the user doesn't have a key specified.

Here is an example of the `variation` method:

<CodeTabs
  defaultValue="js"
  values={[
    { label: 'JavaScript', value: 'js', },
    { label: 'TypeScript', value: 'ts'},
  ]
}>
<CodeTabItem value="js">

```js
client.variation('your.feature.key', false);
```

</CodeTabItem>
<CodeTabItem value="ts">

```ts
import * as ld from 'launchdarkly-js-client-sdk';

const boolFlagValue = client.variation('your.feature.key', false) as boolean;
const numberFlagValue = client.variation('your.feature.key', 2) as number;
const stringFlagValue = client.variation('your.feature.key', 'default') as string;
```

</CodeTabItem>
</CodeTabs>
</Details>

### Node.js (client-side)

<Details summary="Expand Node.js (client-side) code sample">

The `variation` method determines which variation of a feature flag a user receives.

`variation` calls take the feature flag key and a default value. The default value only returns if an error is encountered, such as if the feature flag key doesn't exist or the user doesn't have a key specified.

Here is an example:

<CodeTabs
  defaultValue="js"
  values={[
    { label: 'JavaScript', value: 'js', },
    { label: 'TypeScript', value: 'ts'},
  ]
}>
<CodeTabItem value="js">

```js
const value = client.variation("your.feature.key", false);
```

</CodeTabItem>
<CodeTabItem value="ts">

```ts
import * as ld from 'launchdarkly-node-client-sdk';

const boolFlagValue = client.variation('your.feature.key', false) as boolean;
const numberFlagValue = client.variation('your.feature.key', 2) as number;
const stringFlagValue = client.variation('your.feature.key', 'default') as string;

```

</CodeTabItem>
</CodeTabs>
</Details>

### React Native

<Details summary="Expand React Native code sample">

The variation method determines whether a flag is enabled or not for a specific user. In React Native, there is a variation method for each type, such as `boolVariation` or `stringVariation`.

Variation calls take the feature flag key and a fallback value. When `LDClient` is initialized for the first time at app launch, users receive feature flag fallback values until an initial connection to LaunchDarkly is completed for the first time.

Here is an example:

<CodeTabs
  defaultValue="js"
  values={[
    { label: 'JavaScript', value: 'js', },
  ]
}>
<CodeTabItem value="js">

```js
let boolResult = await client.boolVariation('YOUR_BOOLEAN_FLAG_KEY', false);
let numResult = await client.numberVariation('YOUR_NUMERIC_FLAG_KEY', 2);
let stringResult = await client.stringVariation('YOUR_STRING_FLAG_KEY', '');
let jsonResult = await client.jsonVariation('YOUR_JSON_FLAG_KEY', {});
```

</CodeTabItem>
</CodeTabs>
</Details>

### Roku

<Details summary="Expand Roku code sample">

The `*variation` methods determine which variation of a feature flag a user receives.

`*variation` calls take a feature flag key and a default value. The default value only returns if an error is encountered. For example, the default value returns if the feature flag key doesn't exist or the user doesn't have a key specified.

Here is an example:

<CodeTabs
  defaultValue="brightscript"
  values={[
    { label: 'BrightScript', value: 'brightscript', },
  ]
}>
<CodeTabItem value="brightscript">

```brightscript
REM typed variations
myInt = launchDarkly.intVariation("MY_FLAG_KEY", 123)

myBool = launchDarkly.boolVariation("MY_FLAG_KEY", false)

myString = launchDarkly.stringVariation("MY_FLAG_KEY", "hello world!")

myObjectOrArray = launchDarkly.jsonVariation("MY_FLAG_KEY", {"value": 123})

REM generic variation
myValue = launchDarkly.variation("MY_FLAG_KEY", false)

```

</CodeTabItem>
</CodeTabs>
</Details>

## Server-side SDKs

This feature is available for all of our server-side SDKs:

* [.NET (server-side)](#net-server-side)
* [Apex](#apex)
* [C/C++ (server-side)](#cc-server-side)
* [Erlang](#erlang)
* [Go](#go)
* [Haskell](#haskell)
* [Java](#java)
* [Lua](#lua)
* [Node.js (server-side)](#nodejs-server-side)
* [Node.js (Cloudflare)](#nodejs-cloudflare)
* [PHP](#php)
* [Python](#python)
* [Ruby](#ruby)
* [Rust](#rust)

### .NET (server-side)

<Details summary="Expand .NET (server-side) code sample">

The `Variation` methods determine whether a flag is enabled or not for a specific user. In .NET, there is  a `Variation` method for each type:
* [`BoolVariation`](https://launchdarkly.github.io/dotnet-server-sdk/api/LaunchDarkly.Sdk.Server.LdClient.html#LaunchDarkly_Sdk_Server_LdClient_BoolVariation_)
* [`DoubleVariation`](https://launchdarkly.github.io/dotnet-server-sdk/api/LaunchDarkly.Sdk.Server.LdClient.html#LaunchDarkly_Sdk_Server_LdClient_DoubleVariation_)
* [`FloatVariation`](https://launchdarkly.github.io/dotnet-server-sdk/api/LaunchDarkly.Sdk.Server.LdClient.html#LaunchDarkly_Sdk_Server_LdClient_FloatVariation_)
* [`IntVariation`](https://launchdarkly.github.io/dotnet-server-sdk/api/LaunchDarkly.Sdk.Server.LdClient.html#LaunchDarkly_Sdk_Server_LdClient_IntVariation_)
* [`JsonVariation`](https://launchdarkly.github.io/dotnet-server-sdk/api/LaunchDarkly.Sdk.Server.LdClient.html#LaunchDarkly_Sdk_Server_LdClient_JsonVariation_)
* [`StringVariation`](https://launchdarkly.github.io/dotnet-server-sdk/api/LaunchDarkly.Sdk.Server.LdClient.html#LaunchDarkly_Sdk_Server_LdClient_StringVariation_).

`Variation` calls take the feature flag key, a [`User`](https://launchdarkly.github.io/dotnet-server-sdk/api/LaunchDarkly.Sdk.User.html), and a default value. The `Variation` call adds a user to the Users dashboard if a user with that key doesn't exist already.

Here is an example:

<CodeTabs
  defaultValue="csharp"
  values={[
    { label: '.NET', value: 'csharp', },
  ]
}>
<CodeTabItem value="csharp">

```csharp
var value = client.BoolVariation("your.feature.key", user, false);
```

</CodeTabItem>
</CodeTabs>
</Details>

### Apex

<Details summary="Expand Apex code sample">

The `variation` family of methods determine the flag value for a specific user. In Apex, there is a `variation` method for each type, such as `boolVariation` or `stringVariation`.

The functions take an `LDUser`, feature flag key, and a default value. The default value only returns if an error occurs. For example, the default value returns if the feature flag key doesn't exist or the user doesn't have a key specified.

<Callout intent="info">
<CalloutTitle>Apex variation methods do not automatically add users to the dashboard</CalloutTitle>
<CalloutDescription>

Variation methods like `boolVariation` or `stringVariation` do not automatically generate index events due to limitations with the Apex platform. This means that the SDK does not automatically populate the **Users** dashboard.

We recommend calling `client.identify(user)` with each of your users to generate user indexing events and populate your **Users** dashboard. To learn more, read [Identifying and changing users](/sdk/features/identify#apex).

</CalloutDescription>
</Callout>

Here is an example:

<CodeTabs
  defaultValue="java"
  values={[
    { label: 'Apex', value: 'java', },
  ]
}>
<CodeTabItem value="java">

```java
Boolean value = client.boolVariation(user, 'your.feature.key', false);
```

</CodeTabItem>
</CodeTabs>
</Details>

### C/C++ (server-side)

<Details summary="Expand C/C++ (server-side) code sample">

The `variation` family of functions determine whether a flag is enabled or not for a specific user. In C, there is a `variation` function for each type, such as `LDBoolVariation` or `LDStringVariation`.

The functions take an `LDClient`, `LDUser`, feature flag key, default value, and optional `LDDetails` struct for an evaluation explanation (see below). The default value only returns if an error is encountered. For example, the default value returns if the feature flag key doesn't exist or the user doesn't have a key specified.

Here is an example:

<CodeTabs
  defaultValue="c"
  values={[
    { label: 'Example', value: 'c', },
  ]
}>
<CodeTabItem value="c">

```c
bool value = LDBoolVariation(client, user, "your.feature.key", false, NULL);
```

</CodeTabItem>
</CodeTabs>
</Details>

### Erlang

<Details summary="Expand Erlang code sample">

The `variation` function determines whether a flag is enabled or not for a specific user.

The functions take a flag key, user, default value and an instance tag. The instance tag is optional. The default variation only returns if an error occurs.

For example, if the feature flag key doesn't exist or the user doesn't have a key specified, the user sees the default variation value.

<CodeTabs
  defaultValue="erlang"
  values={[
    { label: 'Erlang', value: 'erlang', },
  ]
}>
<CodeTabItem value="erlang">

```
Flag = ldclient:variation(<<"my-bool-key">>, #{key => <<"aa0ceb">>,}, false, my_instance)
```

</CodeTabItem>
</CodeTabs>
</Details>

### Go

<Details summary="Expand Go code sample">

The `Variation` methods determine whether a flag is enabled or not for a specific user. In Go, there is a `Variation` method for each type:
* [`BoolVariation`](https://pkg.go.dev/gopkg.in/launchdarkly/go-server-sdk.v5#LDClient.BoolVariation)
* [`IntVariation`](https://pkg.go.dev/gopkg.in/launchdarkly/go-server-sdk.v5#LDClient.IntVariation)
* [`Float64Variation`](https://pkg.go.dev/gopkg.in/launchdarkly/go-server-sdk.v5#LDClient.Float64Variation)
* [`StringVariation`](https://pkg.go.dev/gopkg.in/launchdarkly/go-server-sdk.v5#LDClient.StringVariation)
* [`JSONVariation`](https://pkg.go.dev/gopkg.in/launchdarkly/go-server-sdk.v5#LDClient.JSONVariation), which can be any JSON type.

`Variation` methods take the feature flag key, a `User`, and a default value. The default value only returns if an error is encountered. For example, the default value returns if the feature flag key doesn't exist or the user doesn't have a key specified. In the example below, the default value is `false`.

The `Variation` call generates analytics events to tell LaunchDarkly about the flag evaluation and the user properties, so the user will be added to the Users dashboard if a user with that key doesn't exist already.

Here is an example:

<CodeTabs
  defaultValue="go"
  values={[
    { label: 'Go', value: 'go', },
  ]
}>
<CodeTabItem value="go">

```go
result, _ := client.BoolVariation("your.feature.key", user, false)

// result is now true or false depending on the setting of this boolean feature flag
```

</CodeTabItem>
</CodeTabs>
</Details>

### Haskell

<Details summary="Expand Haskell code sample">

The `variation` family of functions determine whether a flag is enabled or not for a specific user.

The functions take a `Client`, `User`, feature flag key, and a default value. The default value only returns if an error occurs. For example, if the feature flag key doesn't exist or the user doesn't have a key specified, the default value is returned.

Here is an example:

<CodeTabs
  defaultValue="haskell"
  values={[
    { label: 'Haskell', value: 'haskell', },
  ]
}>
<CodeTabItem value="haskell">

```haskell
myBoolVariation <- boolVariation client user "YOUR_FEATURE_KEY" False
```

</CodeTabItem>
</CodeTabs>
</Details>

### Java

<Details summary="Expand Java code sample">

The `variation` methods determine which variation of a feature flag a user receives. In Java, there is a `variation` method for each type: [`boolVariation`](http://launchdarkly.github.io/java-server-sdk/com/launchdarkly/sdk/server/LDClient.html#boolVariation-java.lang.String-com.launchdarkly.sdk.LDUser-boolean-), [`intVariation`](http://launchdarkly.github.io/java-server-sdk/com/launchdarkly/sdk/server/LDClient.html#intVariation-java.lang.String-com.launchdarkly.sdk.LDUser-int-), [`doubleVariation`](http://launchdarkly.github.io/java-server-sdk/com/launchdarkly/sdk/server/LDClient.html#doubleVariation-java.lang.String-com.launchdarkly.sdk.LDUser-double-), [`stringVariation`](http://launchdarkly.github.io/java-server-sdk/com/launchdarkly/sdk/server/LDClient.html#stringVariation-java.lang.String-com.launchdarkly.sdk.LDUser-java.lang.String-) and [`jsonValueVariation`](http://launchdarkly.github.io/java-server-sdk/com/launchdarkly/sdk/server/LDClient.html#jsonValueVariation-java.lang.String-com.launchdarkly.sdk.LDUser-com.launchdarkly.sdk.LDValue-), which can be of any JSON type.

The `variation` methods take the feature flag key, an [`LDUser`](http://launchdarkly.github.io/java-server-sdk/com/launchdarkly/sdk/LDUser.html), and a default value. The default value only returns if an error is encountered. For example, the default value returns if the feature flag key doesn't exist or the user doesn't have a key specified.

The `variation` call adds a user to the Users dashboard if a user with that key doesn't exist already.

Here is an example:

<CodeTabs
  defaultValue="java"
  values={[
    { label: 'Java', value: 'java', },
  ]
}>
<CodeTabItem value="java">

```java
boolean value = client.boolVariation("your.feature.key", user, false);
```

</CodeTabItem>
</CodeTabs>
</Details>

### Lua

<Details summary="Expand Lua code sample">

The `variation` family of functions determine whether a flag is enabled or not for a specific user. In Lua, there is a `variation` function for each type, such as `boolVariation` or  `stringVariation`.

The default value only returns if an error is encountered. For example, the default value returns if the feature flag key doesn't exist or the user doesn't have a key specified.

To learn more about configuration options, read the [API docs](https://launchdarkly.github.io/lua-server-sdk/index.html).

Here is an example:

<CodeTabs
  defaultValue="lua"
  values={[
    { label: 'Lua', value: 'lua', },
  ]
}>
<CodeTabItem value="lua">

```lua
local value = client:boolVariation(user, "YOUR_FEATURE_KEY", false)
```

</CodeTabItem>
</CodeTabs>
</Details>

### Node.js (server-side)

<Details summary="Expand Node.js (server-side) code sample">

The `variation` method determines which variation of a feature flag a user receives.

`variation` calls take the feature flag key, an `LDUser`, and a default value. The default value only returns in offline mode or if an error is encountered. For example, the default value returns if the feature flag key doesn't exist or the user doesn't have a key specified.

The `variation` call adds a user to the Users dashboard if a user with that user key doesn't exist already.

Here is an example:

<CodeTabs
  defaultValue="js"
  values={[
    { label: 'JavaScript', value: 'js', },
    { label: 'TypeScript', value: 'ts', },
  ]
}>
<CodeTabItem value="js">

```js
client.variation('your.feature.key', user, false,
  (err, show_feature) => {
    if (show_feature) {
      // application code to show the feature
    }
    else {
      // the code to run if the feature is off
    }
  });
```

</CodeTabItem>
<CodeTabItem value="ts">

```ts
client.variation('your.feature.key', user, false, (err, value) => {
    // check value and proceed accordingly
});
```

</CodeTabItem>
</CodeTabs>
</Details>

### Node.js (Cloudflare)

This SDK uses the same code as the [Node.js server-side SDK](#nodejs-server-side).

### PHP

<Details summary="Expand PHP code sample">

The `variation` method determines which variation of a feature flag a user receives.

`variation` calls take the feature flag key, an `LDUser`, and a default value. The default value only returns if an error is encountered. For example, the default value returns if the feature flag key doesn't exist or the user doesn't have a key specified.

The `variation` call adds a user to the Users dashboard if a user with that user key doesn't exist already.

Here is an example:

<CodeTabs
  defaultValue="php"
  values={[
    { label: 'PHP', value: 'php', },
  ]
}>
<CodeTabItem value="php">

```php
$value = $client->variation($key, $user, false);
```

</CodeTabItem>
</CodeTabs>
</Details>

### Python

<Details summary="Expand Python code sample">

The `variation` method determines which variation of a feature flag a user receives.

`variation` calls take the feature flag key, an `LDUser`, and a default value. The default value only returns if an error is encountered. For example, the default value returns if the feature flag key doesn't exist or the user doesn't have a key specified.

The `variation` call adds a user to the Users dashboard if a user with that user key doesn't exist already.

Here is an example:

<CodeTabs
  defaultValue="py"
  values={[
    { label: 'Python', value: 'py', },
  ]
}>
<CodeTabItem value="py">

```py
show_feature = ldclient.get().variation("your.feature.key", user, False)
```

</CodeTabItem>
</CodeTabs>
</Details>

### Ruby

<Details summary="Expand Ruby code sample">

The `variation` method determines which variation of a feature flag a user receives.

`variation` calls take the feature flag key, a user, and a default value. The default value only returns if an error is encountered. For example, the default value returns if the feature flag key doesn't exist or the user doesn't have a key specified.

The `variation` call adds a user to the Users dashboard if a user with that user key doesn't exist already.

Here is an example:

<CodeTabs
  defaultValue="ruby"
  values={[
    { label: 'Ruby', value: 'ruby', },
  ]
}>
<CodeTabItem value="ruby">

```ruby
value = client.variation("your.feature.key", user, false)
```

</CodeTabItem>
</CodeTabs>
</Details>

### Rust

<Details summary="Expand Rust code sample">

The `variation` methods determine whether a flag is enabled or not for a specific user. In Rust, there is a `variation` method for each type:
* [`bool_variation`](https://docs.rs/launchdarkly-server-sdk/latest/launchdarkly_server_sdk/struct.Client.html#method.bool_variation),
* [`int_variation`](https://docs.rs/launchdarkly-server-sdk/latest/launchdarkly_server_sdk/struct.Client.html#method.int_variation),
* [`float_variation`](https://docs.rs/launchdarkly-server-sdk/latest/launchdarkly_server_sdk/struct.Client.html#method.float_variation),
* [`str_variation`](https://docs.rs/launchdarkly-server-sdk/latest/launchdarkly_server_sdk/struct.Client.html#method.str_variation) for strings, and
* [`json_variation`](https://docs.rs/launchdarkly-server-sdk/latest/launchdarkly_server_sdk/struct.Client.html#method.json_variation), which can be any JSON type.

`variation` methods take a `User`, the feature flag key, and a default value. The default value only returns if an error is encountered. For example, the default value returns if the feature flag key doesn't exist or the user doesn't have a key specified. In the example below, the default value is `false`.

The `variation` call generates analytics events to tell LaunchDarkly about the flag evaluation and the user properties, so the user will be created in LaunchDarkly if a user with that key doesn't exist already.

Here is an example:

<CodeTabs
  defaultValue="rust"
  values={[
    { label: 'Rust', value: 'rust', },
  ]
}>
<CodeTabItem value="rust">

```rust
let result = client.bool_variation(&user, "your.feature.key", false);
// result is now true or false depending on the setting of this boolean feature flag
```

</CodeTabItem>
</CodeTabs>
</Details>
