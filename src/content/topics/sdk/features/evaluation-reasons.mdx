---
path: '/sdk/features/evaluation-reasons'
title: 'Flag evaluation reasons'
description: 'This topic explains how to use the flag evaluation reason feature to get more information about the flag variations LaunchDarkly serves to users.'
published: true
---

## Overview

This topic explains how to use the flag evaluation reason feature to get more information about the flag variations LaunchDarkly serves to users.

To learn more about how LaunchDarkly determines why a user receives a given flag variation, read [Evaluation reasons](/sdk/concepts/evaluation-reasons).

## Understanding the flag evaluation reason feature

Details about each SDK's configuration are available in the SDK-specific sections below.

* [Client-side SDKs](#client-side-sdks)
* [Server-side SDKs](#server-side-sdks)

## Client-side SDKs

<Callout intent="alert">
<CalloutTitle>An evaluation reason configuration option is required</CalloutTitle>
<CalloutDescription>

In client-side SDKs, you must enable an evaluation reason configuration option for this feature to work. To learn more about configuration options, read [Configuration](/sdk/features/config).

</CalloutDescription>
</Callout>

This feature is available in the following client-side SDKs:

* [.NET (client-side)](#net-client-side)
* [Android](#android)
* [Flutter](#flutter)
* [iOS](#ios)
* [JavaScript](#javascript)
* [Node.js (client-side)](#nodejs-client-side)
* [React Native](#react-native)
* [Roku](#roku)

### .NET (client-side)

The `VariationDetail` methods, such as `BoolVariationDetail`, work the same as `Variation`, but also provide additional "reason" information about how a flag value was calculated. For example, you can find out if the user was individually targeted for the flag or was matched by one of the flag's rules. You can examine the "reason" data programmatically, or, if you capture detailed analytics events for flags, view it with Data Export.

Here is an example:

<CodeTabs
  defaultValue="csharp"
  values={[
    { label: 'C#', value: 'csharp', },
  ]
}>
<CodeTabItem value="csharp">

```csharp

EvaluationDetail<bool> detail =
  client.BoolVariationDetail("flag-key", false);
  // or StringVariationDetail for a string-valued flag, etc.

bool value = detail.Value;
int? index = detail.VariationIndex;
EvaluationReason reason = detail.Reason;
```

</CodeTabItem>
</CodeTabs>

To learn more, read [`EvaluationDetail`](https://launchdarkly.github.io/dotnet-client-sdk/html/T_LaunchDarkly_Client_EvaluationDetail_1.htm) and [`BoolVariationDetail`](https://launchdarkly.github.io/dotnet-client-sdk/html/M_LaunchDarkly_Xamarin_ILdClient_BoolVariationDetail.htm).

### Android

The `variationDetail` methods, such as `boolVariationDetail`, work the same as `variation`. They also provide additional "reason" information about how a flag value was calculated, such as if the user matched a specific rule. You can examine the "reason" data programmatically, or, if you capture detailed analytics events for flags, view it with Data Export.

Here is an example:

<CodeTabs
  defaultValue="java"
  values={[
    { label: 'Android', value: 'java', },
  ]
}>
<CodeTabItem value="java">

```java
EvaluationDetail<Boolean> detail =
  client.boolVariationDetail("flag-key", false);
  // or stringVariationDetail for a string-valued flag, etc.

boolean value = detail.getValue();
Integer index = detail.getVariationIndex();
EvaluationReason reason = detail.getReason();
```

</CodeTabItem>
</CodeTabs>

To learn more, read [`EvaluationDetail`](https://launchdarkly.github.io/android-client-sdk/com/launchdarkly/sdk/EvaluationDetail.html) and [`getVariationIndex`](https://launchdarkly.github.io/android-client-sdk/com/launchdarkly/sdk/EvaluationDetail.html#getVariationIndex--).

### Flutter

The `variationDetail` methods, such as `boolVariationDetail`, work the same as `variation`. They also provide additional "reason" information about how a flag value was calculated, such as if the user matched a specific rule. You can examine the "reason" data programmatically, or, if you capture detailed analytics events for flags, view it with Data Export.

Here is an example:

<CodeTabs
  defaultValue="dart"
  values={[
    { label: 'Flutter', value: 'dart', },
  ]
}>
<CodeTabItem value="dart">

```dart
LDEvaluationDetail<bool> detail =
  await LDClient.boolVariationDetail("flag-key", false);
  // or stringVariationDetail for a string-valued flag, etc.

bool value = detail.value;
int index = detail.variationIndex;
LDEvaluationReason reason = detail.reason;
```

</CodeTabItem>
</CodeTabs>

To learn more, read [`LDEvaluationDetail`](https://launchdarkly.github.io/flutter-client-sdk/launchdarkly_flutter_client_sdk/LDEvaluationDetail-class.html) and [`boolVariationDetail`](https://launchdarkly.github.io/flutter-client-sdk/launchdarkly_flutter_client_sdk/LDClient/boolVariationDetail.html).

### iOS

The `variationDetail` methods, such as `boolVariationDetail`, work the same as `variation`. They also provide additional "reason" information about how a flag value was calculated, such as if the user matched a specific rule. You can examine the "reason" data programmatically, or, if you capture detailed analytics events for flags, view it with Data Export.

Here is an example:

<CodeTabs
  defaultValue="swift"
  values={[
    { label: 'iOS (Swift)', value: 'swift', },
  ]
}>
<CodeTabItem value="swift">

```swift
let LDEvaluationDetail<Bool> detail =
  client.variationDetail("flag-key", false);

Bool value = detail.value;
Int? index = detail.variationIndex;
Dictionary<String, Any>? reason = detail.reason;
```

</CodeTabItem>
</CodeTabs>

To learn more, read [`LDEvaluationDetail`](https://launchdarkly.github.io/ios-client-sdk/Classes/LDEvaluationDetail.html) and [`variationDetail`](https://launchdarkly.github.io/ios-client-sdk/Classes/LDClient.html#/s:12LaunchDarkly8LDClientC15variationDetail6forKey12defaultValueAA012LDEvaluationE0CyxGSS_xtAA06LDFlagI11ConvertibleRzlF).

### JavaScript

The `variationDetail` method lets you evaluate a feature flag with the same parameters you would for `variation`. With `variationDetail`, you receive more information about how the value was calculated.

The variation detail returns in an object containing both the result value and a "reason" object which tells you more information about the flag evaluation. For example, you can find out if the user was individually targeted for the flag or was matched by one of the flag's rules. It also indicates if the flag returned the default value due to an error. You can examine the "reason" data programmatically, or, if you capture detailed analytics events for flags, view it with Data Export.

Here is an example:

<CodeTabs
  defaultValue="js"
  values={[
    { label: 'JavaScript', value: 'js', },
  ]
}>
<CodeTabItem value="js">

```js

var detail = client.variationDetail("flag-key", false);

var value = detail.value;
var index = detail.variationIndex;
var reason = detail.reason;
```

</CodeTabItem>
</CodeTabs>

To learn more, read [`LDEvaluationDetail`](https://launchdarkly.github.io/js-client-sdk/interfaces/_launchdarkly_js_client_sdk_.ldevaluationdetail.html) and [`variationDetail`](https://launchdarkly.github.io/js-client-sdk/interfaces/_launchdarkly_js_client_sdk_.ldclient.html#variationdetail).

### Node.js (client-side)

The `variationDetail` method lets you evaluate a feature flag with the same parameters you would for `variation`. With `variationDetail`, you receive more information about how the value was calculated.

The variation detail returns in an object that contains both the result value and a "reason" object which tells you more information about the flag evaluation. For example, you can find out if the user was individually targeted for the flag or was matched by one of the flag's rules. It also indicates if the flag returned the default value due to an error. You can examine the "reason" data programmatically, or, if you capture detailed analytics events for flags, view it with Data Export.

Here is an example:

<CodeTabs
  defaultValue="js"
  values={[
    { label: 'Node.js', value: 'js', },
  ]
}>
<CodeTabItem value="js">

```js

var detail = client.variationDetail("flag-key", false);

var value = detail.value;
var index = detail.variationIndex;
var reason = detail.reason;
```

</CodeTabItem>
</CodeTabs>

To learn more, read [`LDEvaluationDetail`](https://launchdarkly.github.io/node-client-sdk/interfaces/_launchdarkly_node_client_sdk_.ldevaluationdetail.html) and [`variationDetail`](https://launchdarkly.github.io/node-client-sdk/interfaces/_launchdarkly_node_client_sdk_.ldclient.html#variationdetail).

### React Native

The `variationDetail` methods work the same as `variation`, but also provide additional `reason` information about how a flag value was calculated. For example, you can find out if the user was individually targeted for the flag or was matched by one of the flag's rules. You can examine the "reason" data programmatically, or, if you capture detailed analytics events for flags, view it with Data Export.

Here is an example:

<CodeTabs
  defaultValue="js"
  values={[
    { label: 'React Native', value: 'js', },
  ]
}>
<CodeTabItem value="js">

```js
const detail =
  client.boolVariationDetail("flag-key", false);

const value = detail.value;
const index = detail.variationIndex;
const reason = detail.reason;
```

</CodeTabItem>
</CodeTabs>

To learn more, read [`LDEvaluationDetail`](https://launchdarkly.github.io/react-native-client-sdk/index.html#ldevaluationdetail) and [`boolVariationDetail`](https://launchdarkly.github.io/react-native-client-sdk/classes/_launchdarkly_react_native_client_sdk_.ldclient.html#boolvariationdetail).

### Roku

For each variation type there is also an associated version that returns the reason a particular value was returned.

Here is an example:

<CodeTabs
  defaultValue="brightscript"
  values={[
    { label: 'BrightScript', value: 'brightscript', },
  ]
}>
<CodeTabItem value="brightscript">

```brightscript
details = launchDarkly.intVariationDetail("MY_FLAG_KEY", 123)

```

</CodeTabItem>
</CodeTabs>

These variation methods return an object containing the keys `value`, `reason`, and `variationIndex`. The `value` field is the result of the evaluation. The `reason` field is an object that explains why the result happened, for example details about a rule match. The reason object will always contain a `kind` field. Lastly the `variationIndex` field contains the ID of the particular value returned. This field may be null.

## Server-side SDKs

Unlike client-side SDKs, you do not need to enable an evaluation reason configuration option in server-side SDKs for this feature to work.

This feature is available in the following server-side SDKs:

* [.NET (server-side)](#net-server-side)
* [Apex](#apex)
* [C/C++ (server-side)](#cc-server-side)
* [Erlang](#erlang)
* [Go](#go)
* [Haskell](#haskell)
* [Java](#java)
* [Lua](#lua)
* [Node.js (server-side)](#nodejs-server-side)
* [PHP](#php)
* [Python](#python)
* [Ruby](#ruby)

### .NET (server-side)

The `VariationDetail` methods, such as [`BoolVariationDetail`](https://launchdarkly.github.io/dotnet-server-sdk/api/LaunchDarkly.Sdk.Server.LdClient.html#LaunchDarkly_Sdk_Server_LdClient_BoolVariationDetail_), work the same as the `Variation` methods, but also provide additional "reason" information about how a flag value was calculated. For example, you can find out if the user was individually targeted for the flag or was matched by one of the flag's rules. You can examine the "reason" data programmatically, or, if you capture detailed analytics events for flags, view it with Data Export.

Here is an example:

<CodeTabs
  defaultValue="csharp"
  values={[
    { label: '.NET', value: 'csharp', },
  ]
}>
<CodeTabItem value="csharp">

```csharp
EvaluationDetail<bool> detail =
  client.BoolVariationDetail("flag-key", myUser, false);
  // or StringVariationDetail for a string-valued flag, etc.

bool value = detail.Value;
int? index = detail.VariationIndex;
EvaluationReason reason = detail.Reason;
```

</CodeTabItem>
</CodeTabs>

To learn more, read [`EvaluationDetail`](https://launchdarkly.github.io/dotnet-server-sdk/api/LaunchDarkly.Sdk.EvaluationDetail-1.html), [`BoolVariationDetail`](https://launchdarkly.github.io/dotnet-server-sdk/api/LaunchDarkly.Sdk.Server.LdClient.html#LaunchDarkly_Sdk_Server_LdClient_BoolVariationDetail_).

### Apex

By passing an `LDClient.EvaluationDetail` object to a variation call you can programmatically inspect the reason for a particular evaluation.

Here is an example:

<CodeTabs
  defaultValue="java"
  values={[
    { label: 'Apex', value: 'java', },
  ]
}>
<CodeTabItem value="java">

```java
LDClient.EvaluationDetail details = new LDClient.EvaluationDetail();

Boolean value = client.boolVariation(user, 'your.feature.key', false, details);

/* inspect details here */
if (details.getReason().getKind() == EvaluationReason.Kind.OFF) {
    /* ... */
}
```

</CodeTabItem>
</CodeTabs>

### C/C++ (server-side)

By passing an `LDDetails` struct to a variation call you can programmatically inspect the reason for a particular evaluation.

Here is an example:

<CodeTabs
  defaultValue="c"
  values={[
    { label: 'C', value: 'c', },
  ]
}>
<CodeTabItem value="c">

```c
struct LDDetails details;
bool value = LDBoolVariation(client, user, "your.feature.key", false, &details);

/* inspect details here */
if (details.reason == LD_FLAG_NOT_FOUND) {
    /* ... */
}

LDDetailsClear(&details);
```

</CodeTabItem>
</CodeTabs>

To learn more about the `LDDetails` structure, inspect `ldvariations.h`.

### Erlang

The `variation_detail` function is similar to the variation function, but also returns an explanation of the evaluation that you can inspect programatically.

Here is an example:

<CodeTabs
  defaultValue="erlang"
  values={[
    { label: 'Erlang', value: 'erlang', },
  ]
}>
<CodeTabItem value="erlang">

```
Flag = ldclient:variation_detail(<<"my-bool-key">>, #{key => <<"aa0ceb">>}, false)
```

</CodeTabItem>
</CodeTabs>

### Go

The `VariationDetail` methods ([`BoolVariationDetail`](https://pkg.go.dev/gopkg.in/launchdarkly/go-server-sdk.v5#LDClient.BoolVariationDetail), etc.) work the same as `Variation`, but also provide additional "reason" information about how a flag value was calculated. For example, you can find out if the user was individually targeted for the flag or was matched by one of the flag's rules. You can examine the "reason" data programmatically, or, if you capture detailed analytics events for flags, view it with Data Export.

Here is an example:

<CodeTabs
  defaultValue="go"
  values={[
    { label: 'Go', value: 'go', },
  ]
}>

<CodeTabItem value="go">

```go
value, detail, err := client.BoolVariationDetail("flag-key", myUser, false)
// or StringVariationDetail for a string-valued flag, etc.

index := detail.VariationIndex
reason := detail.Reason

// In Go SDK 5.0 and higher, detail.VariationIndex uses the type ldvalue.OptionalInt, which
// allows an "undefined" state if evaluation failed. In earlier Go SDK versions, it is an
// *int which is nil if evaluation failed.
```

</CodeTabItem>
</CodeTabs>

To learn more, read [`EvaluationDetail`](https://pkg.go.dev/gopkg.in/launchdarkly/go-sdk-common.v2/ldreason#EvaluationDetail) and [`BoolVariationDetail`](https://pkg.go.dev/gopkg.in/launchdarkly/go-server-sdk.v5#LDClient.BoolVariationDetail).

### Haskell

The `variationDetail` functions are similar to the `variation` functions, but they also return an explanation of the evaluation that is programmatically inspectable.

Here is an example:

<CodeTabs
  defaultValue="haskell"
  values={[
    { label: 'Haskell', value: 'haskell', },
  ]
}>
<CodeTabItem value="haskell">

```haskell
details :: IO (EvaluationDetail Bool)
details = boolVariationDetail client user "YOUR_FEATURE_KEY" False
```

</CodeTabItem>
</CodeTabs>

For specific information on the `EvaluationDetail` structure, inspect the `LaunchDarkly.Server.Details` module.

### Java

The `variationDetail` methods ([`boolVariationDetail`](http://launchdarkly.github.io/java-server-sdk/com/launchdarkly/sdk/server/LDClient.html#boolVariationDetail-java.lang.String-com.launchdarkly.sdk.LDUser-boolean-), etc.) work the same as `variation`, but also provide additional "reason" information about how a flag value was calculated. For example, you can find out if the user was individually targeted for the flag or was matched by one of the flag's rules. You can examine the "reason" data programmatically, or, if you capture detailed analytics events for flags, view it with Data Export.

Here is an example:

<CodeTabs
  defaultValue="java"
  values={[
    { label: 'Java', value: 'java', },
  ]
}>

<CodeTabItem value="java">

```java
import com.launchdarkly.sdk.*;

EvaluationDetail<Boolean> detail =
  client.boolVariationDetail("flag-key", myUser, false);
  // or stringVariationDetail for a string-valued flag, etc.

boolean value = detail.getValue();
int index = detail.getVariationIndex();       // will be < 0 if evaluation failed
EvaluationReason reason = detail.getReason();


// Before version 5.0, this was slightly different:
import com.launchdarkly.client.*;

EvaluationDetail<Boolean> detail =
  client.boolVariationDetail("flag-key", myUser, false);

boolean value = detail.getValue();
Integer index = detail.getVariationIndex();
EvaluationReason reason = detail.getReason();
```

</CodeTabItem>
</CodeTabs>

To learn more, read [`EvaluationDetail`](https://javadoc.io/static/com.launchdarkly/launchdarkly-java-server-sdk/5.0.0/com/launchdarkly/sdk/EvaluationDetail.html) and [`boolVariationDetail`](https://javadoc.io/static/com.launchdarkly/launchdarkly-java-server-sdk/5.0.0/com/launchdarkly/sdk/server/LDClient.html#boolVariationDetail-java.lang.String-com.launchdarkly.sdk.LDUser-boolean-).

### Lua

By using the `*Detail` family of variation calls you can programmatically inspect the reason for a particular evaluation:

<CodeTabs
  defaultValue="lua"
  values={[
    { label: 'Lua', value: 'lua', },
  ]
}>
<CodeTabItem value="lua">

```lua
local details = client:boolVariationDetail(client, user, "your.feature.key", false);

/* inspect details here */
if details.reason == "FLAG_NOT_FOUND" then
end
```

</CodeTabItem>
</CodeTabs>

To learn more about configuration options, read the [API docs](https://launchdarkly.github.io/lua-server-sdk/index.html#Details).

### Node.js (server-side)

The `variationDetail` method lets you evaluate a feature flag (using the same parameters as you would for `variation`) and receive more information about how the value was calculated.

The variation detail is returned in an object that contains both the result value and a "reason" object which will tell you, for instance, if the user was individually targeted for the flag or was matched by one of the flag's rules. It will also indicate if the flag returned the default value due to an error. You can examine the "reason" data programmatically, or, if you capture detailed analytics events for flags, view it with Data Export.

Here is an example:

<CodeTabs
  defaultValue="js"
  values={[
    { label: 'Node.js', value: 'js', },
  ]
}>
<CodeTabItem value="js">

```js
var detail = client.variationDetail("flag-key", myUser, false);

var value = detail.value;
var index = detail.variationIndex;
var reason = detail.reason;
```

</CodeTabItem>
</CodeTabs>

To learn more, read [`LDEvaluationDetail`](https://launchdarkly.github.io/node-server-sdk/interfaces/_launchdarkly_node_server_sdk_.ldevaluationdetail.html) and [`variationDetail`](https://launchdarkly.github.io/node-server-sdk/interfaces/_launchdarkly_node_server_sdk_.ldclient.html#variationdetail).

### PHP

The `variationDetail` method lets you evaluate a feature flag (using the same parameters as you would for `variation`) and receive more information about how the value was calculated.

The variation detail is returned in an object that contains both the result value and a "reason" object which will tell you, for instance, if the user was individually targeted for the flag or was matched by one of the flag's rules. It will also indicate if the flag returned the default value due to an error. You can examine the "reason" data programmatically, or, if you capture detailed analytics events for flags, view it with Data Export.

Here is an example:

<CodeTabs
  defaultValue="php"
  values={[
    { label: 'PHP', value: 'php', },
  ]
}>
<CodeTabItem value="php">

```php

$detail = $client->variationDetail("flag-key", $myUser, false);

$value = $detail->getValue();
$index = $detail->getVariationIndex();
$reason = $detail->getReason();
```

</CodeTabItem>
</CodeTabs>

To learn more, read [`EvaluationDetail`](https://launchdarkly.github.io/php-server-sdk/classes/LaunchDarkly-EvaluationDetail.html) and [`variationDetail`](https://launchdarkly.github.io/php-server-sdk/classes/LaunchDarkly-LDClient.html#method_variationDetail).

### Python

The `variation_detail` method lets you evaluate a feature flag with the same parameters as you would for `variation`. You can use thie method to receive more information about how the value was calculated.

The variation detail is returned in an object that contains both the result value and a "reason" object which will tell you, for instance, if the user was individually targeted for the flag or was matched by one of the flag's rules. It will also indicate if the flag returned the default value due to an error. You can examine the "reason" data programmatically, or, if you capture detailed analytics events for flags, view it with Data Export.

Here is an example:

<CodeTabs
  defaultValue="py"
  values={[
    { label: 'Python', value: 'py', },
  ]
}>
<CodeTabItem value="py">

```py
detail = client.variation_detail("flag-key", my_user, False)
value = detail.value
index = detail.variation_index
reason = detail.reason
```

</CodeTabItem>
</CodeTabs>

To learn more, read [`EvaluationDetail`](https://launchdarkly-python-sdk.readthedocs.io/en/latest/api-main.html#ldclient.flag.EvaluationDetail) and [`variation_detail`](https://launchdarkly-python-sdk.readthedocs.io/en/latest/api-main.html#ldclient.client.LDClient.variation_detail).

### Ruby

The `variation_detail` method lets you evaluate a feature flag (using the same parameters as you would for `variation`) and receive more information about how the value was calculated.

The variation detail is returned in an object that contains both the result value and a "reason" object which will tell you, for instance, if the user was individually targeted for the flag or was matched by one of the flag's rules. It will also indicate if the flag returned the default value due to an error. You can examine the "reason" data programmatically, or, if you capture detailed analytics events for flags, view it with Data Export.

Here is an example:

<CodeTabs
  defaultValue="ruby"
  values={[
    { label: 'Ruby', value: 'ruby', },
  ]
}>
<CodeTabItem value="ruby">

```ruby
detail = client.variation_detail("flag-key", my_user, false)
value = detail.value
index = detail.variation_index
reason = detail.reason
```

</CodeTabItem>
</CodeTabs>

To learn more, read [`EvaluationDetail`](https://www.rubydoc.info/gems/launchdarkly-server-sdk/LaunchDarkly/EvaluationDetail) and [`variation_detail`](https://www.rubydoc.info/gems/launchdarkly-server-sdk/LaunchDarkly/LDClient#variation_detail-instance_method).
